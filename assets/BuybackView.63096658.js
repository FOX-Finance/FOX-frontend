import{_ as O,B as r,p as f,g as p,c as T,a as k,b as F,d as R,o as l,e as a,f as _,h as t,w as u,v as V,i as h,j as m,k as W,l as L,m as S,n as E,r as B,q as X,s as v,t as g,u as b,x as A,y as w,z as x,A as y,C}from"./index.bc668788.js";const H={data(){return{connected:!1,approval_foxs:!1,approval_fox:!1,cdp:"",foxs:r.from("0"),weth:r.from("0"),ltv:0,fox_format:"",weth_format:"",foxs_format:""}},computed:{formattedWETH:{get(){return this.weth_format===""?"":this.weth_format},set(o){let e=o.toString();this.weth_format=e,e===""&&(e="0"),this.weth=f(e,"ether")}},formattedLTV:{get(){return this.ltv===""?"":+(this.ltv/100).toFixed(2)},set(o){this.ltv=+(+o.toFixed(2)*100).toFixed(2)}},formattedFOXS:{get(){return this.foxs_format===""?"":this.foxs_format},set(o){let e=o.toString();this.foxs_format=e,e===""&&(e="0"),this.foxs=f(e,"ether")}}},mounted(){this.emitter.on("metamask-connect-event",o=>{this.connected=o,this.connected&&this.checkAllowance()}),m()!==""&&(this.connected=!0),this.checkAllowance()},methods:{checkAllowance:function(){p("FOXS").then(o=>{o!=0&&(this.approval_foxs=!0,p("FOX").then(e=>{e!=0&&(this.approval_fox=!0)}))})},connectOnClick:function(){console.log("connected : ",this.connected),!(m()!==""||this.connected)&&T().then(o=>{o?(console.log("metamask successfully connected!"),this.emitter.emit("metamask-connect-event",!0)):(console.log("metamask connection failed!"),this.emitter.emit("metamask-connect-event",!1))})},approveOnClick:function(){console.log("approveOnClick (approval_foxs) : ",this.approval_foxs),this.approval_foxs?this.approval_fox||(this.emitter.emit("loading-event",!0),k("FOX").then(o=>{this.emitter.emit("loading-event",!1),o?this.approval_fox=!0:this.approval_fox=!1})):(this.emitter.emit("loading-event",!0),k("FOXS").then(o=>{this.emitter.emit("loading-event",!1),o?this.approval_foxs=!0:this.approval_foxs=!1}))},buybackOnClick:function(){this.emitter.emit("loading-event",!0),F(this.cdp,this.foxs).then(o=>{this.emitter.emit("loading-event",!1),console.log(o?"buyback success!":"buyback failed!")})},changeCDP:function(){},inputFOXS:function(){R(this.cdp,this.foxs,this.ltv).then(o=>{this.weth=o})},inputLTV:function(){this.inputFOXS()}}},z={class:"uk-width-1-1"},M={key:0,class:"wallet-outer uk-width-1-1"},P=t("div",{class:"wallet-inner"},[t("span",{"uk-icon":"icon: more; ratio: 3"}),t("p",null,"Please connect to wallet")],-1),U=[P],D={class:"uk-width-1-1"},N=t("hr",null,null,-1),I={class:"uk-inline form-icon"},G={"uk-form-custom":"target: > button > span:first-child",style:{"padding-left":"0px","padding-right":"0px"}},j=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("span",null,"CDP#")],-1),q=t("option",{value:""},"Please select...",-1),J=[q],K=t("button",{class:"uk-button uk-button-grey form-button uk-form-width-medium uk-form-large uk-text-left",type:"button",tabindex:"-1",style:{"max-width":"100%"}},[t("span"),t("span",{"uk-icon":"icon: chevron-down",style:{float:"right",position:"relative",right:"95px",top:"17px"}})],-1),Q=t("div",{class:"wrap"},[t("span",{class:"icon-circle","uk-icon":"icon: arrow-down; ratio: 1.5;"})],-1),Y={class:"uk-inline form-icon"},Z=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("img",{src:W,style:{width:"20px"}}),t("span",null,"FOXS")],-1),$=["disabled"],tt=t("div",{class:"wrap"},[t("span",{class:"icon-circle","uk-icon":"icon: arrow-down; ratio: 1.5;"})],-1),et={class:"uk-inline form-icon"},ot=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("img",{src:L,style:{width:"20px"}}),t("span",null,"BNB")],-1),nt={class:"wrap"},st={class:"uk-inline"},it=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("span",null,"LTV(%)")],-1),lt=["disabled"],at=t("hr",null,null,-1),rt={key:0},ct={key:1},ut={key:0},dt={key:1},ht={key:2};function ft(o,e,c,d,i,s){return l(),a("div",z,[i.connected?_("",!0):(l(),a("div",M,U)),t("div",D,[N,t("div",I,[t("div",G,[j,u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>i.cdp=n),"aria-label":"Custom controls",class:"form-button uk-form-width-medium uk-form-large",onChange:e[1]||(e[1]=(...n)=>s.changeCDP&&s.changeCDP(...n))},J,544),[[V,i.cdp]]),K])]),Q,t("div",Y,[Z,u(t("input",{class:"uk-input input-form uk-form-width-medium uk-form-large",type:"number","onUpdate:modelValue":e[2]||(e[2]=n=>s.formattedFOXS=n),onInput:e[3]||(e[3]=(...n)=>s.inputFOXS&&s.inputFOXS(...n)),disabled:i.cdp===""},null,40,$),[[h,s.formattedFOXS]])]),tt,t("div",et,[ot,u(t("input",{readonly:"",class:"uk-input result-form uk-form-width-medium uk-form-large",type:"number","onUpdate:modelValue":e[4]||(e[4]=n=>s.formattedWETH=n)},null,512),[[h,s.formattedWETH]])]),t("div",nt,[t("div",st,[it,u(t("input",{class:"uk-input input-form uk-form-width-medium uk-form-large",type:"number","onUpdate:modelValue":e[5]||(e[5]=n=>s.formattedLTV=n),onInput:e[6]||(e[6]=(...n)=>s.inputLTV&&s.inputLTV(...n)),disabled:i.cdp===""},null,40,lt),[[h,s.formattedLTV]])])]),at,i.approval_foxs&&i.approval_fox?(l(),a("div",rt,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[7]||(e[7]=(...n)=>s.buybackOnClick&&s.buybackOnClick(...n))}," Buyback ")])):i.connected?(l(),a("div",ct,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[8]||(e[8]=(...n)=>s.approveOnClick&&s.approveOnClick(...n))},[i.approval_foxs?i.approval_fox?_("",!0):(l(),a("span",dt,"Approve(FOX)")):(l(),a("span",ut,"Approve(FOXS)"))])])):(l(),a("div",ht,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[9]||(e[9]=(...n)=>s.connectOnClick&&s.connectOnClick(...n))}," Connect Wallet ")]))])])}const mt=O(H,[["render",ft]]),pt={data(){return{connected:!1,approval_weth:!1,cdp:"",weth:r.from("0"),ltv:0,foxs:r.from("0"),weth_format:"",foxs_format:"",bWethWrongRange:!1,bLtvWrongRange:!1,trustLevel:0,maxLTV:0}},computed:{formattedWETH:{get(){return this.weth_format===""?"":this.weth_format},set(o){let e=o.toString();this.weth_format=e,e===""&&(e="0"),this.weth=f(e,"ether")}},formattedLTV:{get(){return this.ltv===""?"":+(this.ltv/100).toFixed(2)},set(o){console.log("set ltv!!",o),this.ltv=+(+o.toFixed(2)*100).toFixed(2)}},formattedFOXS:{get(){return this.foxs_format===""?"":this.foxs_format},set(o){let e=o.toString();this.foxs_format=e,e===""&&(e="0"),this.foxs=f(e,"ether")}}},mounted(){this.emitter.on("metamask-connect-event",o=>{this.connected=o,this.connected&&this.checkAllowance()}),m()!==""&&(this.connected=!0),this.updateValues(),this.checkAllowance()},methods:{checkAllowance:function(){p("WETH").then(o=>{o!=0&&(this.approval_weth=!0)})},updateValues:function(){S().then(o=>{this.trustLevel=+(o/100).toFixed(2)}),E().then(o=>{this.maxLTV=+(o/100).toFixed(2)})},connectOnClick:function(){console.log("connected : ",this.connected),!(m()!==""||this.connected)&&T().then(o=>{o?(console.log("metamask successfully connected!"),this.emitter.emit("metamask-connect-event",!0)):(console.log("metamask connection failed!"),this.emitter.emit("metamask-connect-event",!1))})},approveOnClick:function(){this.approval_weth||(this.emitter.emit("loading-event",!0),k("WETH").then(o=>{this.emitter.emit("loading-event",!1),o?this.approval_weth=!0:this.approval_weth=!1}))},RecollateralizeOnClick:function(){this.emitter.emit("loading-event",!0),B(this.cdp,this.weth,this.ltv).then(o=>{this.emitter.emit("loading-event",!1),console.log(o?"recollateralize success!":"recollateralize failed!")})},changeCDP:function(){X(this.cdp).then(o=>{this.setWETH(o.collateralAmount_),this.ltv=o.ltv_,this.setFOXS(o.shareAmount_)})},setWETH:function(o){this.weth=r.from(o),this.weth_format=v(r.from(o))},setFOXS:function(o){this.foxs=r.from(o),this.foxs_format=v(r.from(o))},updateMaxWethOnClick:async function(){this.updateMaxWETH().then(o=>{this.inputWETH()})},updateMaxLtvOnClick:async function(){this.updateMaxLTV().then(o=>{this.inputLTV()})},updateMaxWETH:async function(){return g(this.cdp,this.ltv).then(o=>{this.setWETH(o.upperBound_)})},updateMaxLTV:async function(){return b(this.cdp,this.weth).then(o=>{this.ltv=o.upperBound_})},inputWETH:async function(o){this.updateFoxs().then(e=>{this.checkRange(o)})},inputLTV:async function(o){this.updateFoxs().then(e=>{this.checkRange(o)})},updateFoxs:async function(){return A(this.cdp,this.weth,this.ltv).then(o=>{console.log("getShareAmountInRecollateralize",o),this.setFOXS(r.from(o))})},checkRange:async function(o){g(this.cdp,this.ltv).then(e=>{let c=r.from(e.upperBound_),d=r.from(e.lowerBound_);this.bWethWrongRange=o!==void 0&&parseInt(o.target.value)<0||this.weth.gt(c)||this.weth.lt(d),console.log(this.bWethWrongRange,"WETH RANGE!!! ",c,d)}),b(this.cdp,this.weth).then(e=>{let c=e.upperBound_,d=e.lowerBound_;this.bLtvWrongRange=o!==void 0&&parseInt(o.target.value)<0||this.ltv>c||this.ltv<d,console.log(this.bLtvWrongRange,"LTV RANGE!!! ",c,d,this.ltv)})}}},kt={class:"uk-width-1-1"},_t={key:0,class:"wallet-outer uk-width-1-1"},vt=t("div",{class:"wallet-inner"},[t("span",{"uk-icon":"icon: more; ratio: 3"}),t("p",null,"Please connect to wallet")],-1),gt=[vt],bt={class:"uk-width-1-1"},wt=t("hr",null,null,-1),xt={class:"uk-inline form-icon"},yt={"uk-form-custom":"target: > button > span:first-child",style:{"padding-left":"0px","padding-right":"0px"}},Ct=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("span",null,"CDP#")],-1),Ot=t("option",{value:""},"Please select...",-1),Tt=[Ot],Vt=t("button",{class:"uk-button uk-button-grey form-button uk-form-width-medium uk-form-large uk-text-left",type:"button",tabindex:"-1",style:{"max-width":"100%"}},[t("span"),t("span",{"uk-icon":"icon: chevron-down",style:{float:"right",position:"relative",right:"95px",top:"17px"}})],-1),Wt=t("div",{class:"wrap"},[t("span",{class:"icon-circle","uk-icon":"icon: arrow-down; ratio: 2;",style:{"margin-left":"-1px"}})],-1),Lt={class:"uk-inline form-icon"},Ft=t("img",{src:L,style:{width:"20px"}},null,-1),Rt=t("span",null,"BNB",-1),St=[Ft,Rt],Et=["disabled"],Bt={class:"wrap"},Xt={class:"uk-inline"},At=t("span",null,"LTV(%)",-1),Ht=[At],zt=["disabled"],Mt={key:0,class:"description"},Pt=t("span",{style:{"font-weight":"bold",color:"red"}},"WRONG VALUE!",-1),Ut=[Pt],Dt={key:1,class:"description"},Nt=t("span",{style:{"font-weight":"bold"}},"MAX LTV:",-1),It=t("hr",{class:"custom-divider-vertical"},null,-1),Gt={class:"description"},jt=t("span",{style:{"font-weight":"bold"}},"TRUST LEVEL:",-1),qt=t("div",{class:"wrap"},[t("span",{class:"icon-circle","uk-icon":"icon: arrow-down; ratio: 2;",style:{"margin-left":"-1px"}})],-1),Jt={class:"uk-inline form-icon"},Kt=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("img",{src:W,style:{width:"20px"}}),t("span",null,"FOXS")],-1),Qt=t("hr",null,null,-1),Yt={key:2},Zt={key:3},$t={key:4};function te(o,e,c,d,i,s){return l(),a("div",kt,[i.connected?_("",!0):(l(),a("div",_t,gt)),t("div",bt,[wt,t("div",xt,[t("div",yt,[Ct,u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>i.cdp=n),"aria-label":"Custom controls",class:"form-button uk-form-width-medium uk-form-large",onChange:e[1]||(e[1]=(...n)=>s.changeCDP&&s.changeCDP(...n))},Tt,544),[[V,i.cdp]]),Vt])]),Wt,t("div",Lt,[t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon",onClick:e[2]||(e[2]=n=>s.updateMaxWethOnClick())},St),u(t("input",{class:w(["uk-input input-form uk-form-width-medium uk-form-large",{wrong:i.bWethWrongRange}]),type:"number",min:"0","onUpdate:modelValue":e[3]||(e[3]=n=>s.formattedWETH=n),onInput:e[4]||(e[4]=n=>s.inputWETH(n)),disabled:i.cdp===""},null,42,Et),[[h,s.formattedWETH]])]),t("div",Bt,[t("div",Xt,[t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon",onClick:e[5]||(e[5]=n=>s.updateMaxLtvOnClick())},Ht),u(t("input",{class:w(["uk-input input-form uk-form-width-medium uk-form-large",{wrong:i.bLtvWrongRange}]),type:"number","onUpdate:modelValue":e[6]||(e[6]=n=>s.formattedLTV=n),onInput:e[7]||(e[7]=n=>s.inputLTV(n)),disabled:i.cdp===""},null,42,zt),[[h,s.formattedLTV]])])]),i.bWethWrongRange||i.bLtvWrongRange?(l(),a("div",Mt,Ut)):(l(),a("div",Dt,[Nt,x(" "+y(this.maxLTV)+"% ",1)])),It,t("div",Gt,[jt,x(" "+y(this.trustLevel)+"% ",1)]),qt,t("div",Jt,[Kt,u(t("input",{readonly:"",class:"uk-input result-form uk-form-width-medium uk-form-large",type:"number","onUpdate:modelValue":e[8]||(e[8]=n=>s.formattedFOXS=n)},null,512),[[h,s.formattedFOXS]])]),Qt,i.approval_weth?(l(),a("div",Yt,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[9]||(e[9]=(...n)=>s.RecollateralizeOnClick&&s.RecollateralizeOnClick(...n))}," Recollateralize ")])):i.connected?(l(),a("div",Zt,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[10]||(e[10]=(...n)=>s.approveOnClick&&s.approveOnClick(...n))}," Approve(WETH) ")])):(l(),a("div",$t,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[11]||(e[11]=(...n)=>s.connectOnClick&&s.connectOnClick(...n))}," Connect Wallet ")]))])])}const ee=O(pt,[["render",te]]),oe={class:"width-1-1-medium"},ne={class:"uk-card uk-card-default"},se=t("ul",{class:"uk-flex-center","uk-tab":"","data-uk-tab":"{connect:'#buyback-tab-contents'}"},[t("li",{class:"uk-active"},[t("a",null,"Buyback")]),t("li",null,[t("a",null,"Recollateralize")])],-1),ie={id:"buyback-tab-contents",class:"uk-switcher"},ae={__name:"BuybackView",setup(o){return(e,c)=>(l(),a("div",oe,[t("div",ne,[t("div",null,[se,t("ul",ie,[t("li",null,[C(mt)]),t("li",null,[C(ee)])])])])]))}};export{ae as default};
